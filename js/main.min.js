var Main=(function(){var currentState='start',frameRate=1000/30,lastTick=new Date(0),state={start:{tick:function(){World.newGame();currentState='game';},keyboardDown:function(e){}},game:{tick:function(){World.update();},keyboardDown:function(e){var w=World.getStatus();switch(e.keyCode){case 68:w.ship.headingChange()
break;case 65:w.ship.headingChange(true);break;case 87:w.ship.speedChange();break;case 83:w.ship.speedChange(true);break;case 76:var p=w.onPlanet();if(p){w.selectedPlanet=p;currentState='planetMenu';}
break;}}},planetMenu:{tick:function(){World.updatePlanet();},keyboardDown:function(e){var w=World.getStatus(),p=w.selectedPlanet;if(e.keyCode==76){currentState='game';}
if(e.keyCode==49){if(!p._starPort){World.buy('sp');}}
if(e.keyCode==50){if(p._id==='home'){p._ore+=w.ship.ore;w.ship.ore=0;}else{w.ship.loadOre(p._ore,function(){p._ore=0;});}}}}};loop=function(){var now=new Date();requestAnimationFrame(loop);if(now-lastTick>=frameRate){state[currentState].tick();Canvas.draw[currentState]();lastTick=new Date();}};loop();window.addEventListener('keydown',function(e){state[currentState].keyboardDown(e);});return{changeState:function(state){currentState=state;}}}
());